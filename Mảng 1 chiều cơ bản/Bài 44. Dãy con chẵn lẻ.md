![image](https://github.com/user-attachments/assets/b8cf6f53-585b-43cc-9dc5-93cbd4ee364c)

Ráº¥t tá»‘t! LÃ m theo cÃ¡ch **prefix sum** sáº½ giÃºp **giáº£m thá»i gian tá»« O(NÂ²) â†’ O(N)**, nhanh hÆ¡n ráº¥t nhiá»u cho `N` lá»›n.

---

## âœ… Ã tÆ°á»Ÿng tá»‘i Æ°u báº±ng Prefix Sum (Difference Array):

### ğŸ¯ Má»¥c tiÃªu:

* TÃ­nh **hiá»‡u giá»¯a sá»‘ láº» vÃ  sá»‘ cháºµn** á»Ÿ má»—i vá»‹ trÃ­ máº£ng.
* Náº¿u tá»« Ä‘áº§u Ä‘áº¿n vá»‹ trÃ­ `i`, hiá»‡u `sá»‘ láº» - sá»‘ cháºµn` lÃ  `x`, vÃ  táº¡i vá»‹ trÃ­ `j > i`, hiá»‡u cÅ©ng lÃ  `x` â‡’ Ä‘oáº¡n `A[i+1...j]` cÃ³ **sá»‘ láº» = sá»‘ cháºµn**.

---

### âœ… CÃ¡ch lÃ m:

1. Duyá»‡t tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i máº£ng:

   * Náº¿u lÃ  sá»‘ **láº»**: cá»™ng +1 vÃ o biáº¿n `balance`
   * Náº¿u lÃ  sá»‘ **cháºµn**: trá»« -1 khá»i `balance`
2. Má»—i láº§n gáº·p cÃ¹ng má»™t `balance` Ä‘Ã£ tá»«ng xuáº¥t hiá»‡n trÆ°á»›c Ä‘Ã³, ta biáº¿t Ä‘Ã£ cÃ³ má»™t Ä‘oáº¡n **cÃ¢n báº±ng cháºµn - láº»**.
3. DÃ¹ng `Map<Integer, Integer>` Ä‘á»ƒ Ä‘áº¿m **sá»‘ láº§n gáº·p má»—i `balance`**.

---

### âœ… Code Java:

```java
import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        int n = sc.nextInt();
        int[] a = new int[n];

        for (int i = 0; i < n; i++) {
            a[i] = sc.nextInt();
        }

        Map<Integer, Integer> balanceCount = new HashMap<>();
        int balance = 0;
        int count = 0;

        balanceCount.put(0, 1); // Khá»Ÿi táº¡o: hiá»‡u 0 xuáº¥t hiá»‡n 1 láº§n (trÆ°á»ng há»£p tá»« Ä‘áº§u máº£ng)

        for (int i = 0; i < n; i++) {
            if (a[i] % 2 == 0) {
                balance--;  // cháºµn: -1
            } else {
                balance++;  // láº»: +1
            }

            // Náº¿u balance nÃ y tá»«ng xuáº¥t hiá»‡n trÆ°á»›c Ä‘Ã³, nghÄ©a lÃ  cÃ³ Ä‘oáº¡n con cÃ¢n báº±ng
            count += balanceCount.getOrDefault(balance, 0);

            // Cáº­p nháº­t sá»‘ láº§n gáº·p balance hiá»‡n táº¡i
            balanceCount.put(balance, balanceCount.getOrDefault(balance, 0) + 1);
        }

        System.out.println(count);
    }
}
```

---

### âœ… Giáº£i thÃ­ch báº±ng vÃ­ dá»¥:

**Input:**

```
7
3 2 1 6 4 0 0
```

**Äi qua tá»«ng pháº§n tá»­:**

| Chá»‰ sá»‘ | GiÃ¡ trá»‹ | balance | Giáº£i thÃ­ch         | count tÄƒng thÃªm |
| ------ | ------- | ------- | ------------------ | --------------- |
| 0      | 3       | +1      | Láº» â†’ balance = 1   | 0               |
| 1      | 2       | 0       | Cháºµn â†’ balance = 0 | +1 (0 Ä‘Ã£ gáº·p)   |
| 2      | 1       | +1      | Láº» â†’ balance = 1   | +1              |
| 3      | 6       | 0       | Cháºµn â†’ balance = 0 | +2              |
| ...    | ...     | ...     | ...                | ...             |

**Káº¿t quáº£ cuá»‘i cÃ¹ng:** `4` (giá»‘ng nhÆ° cÃ¡ch O(NÂ²), nhÆ°ng cháº¡y nhanh hÆ¡n ráº¥t nhiá»u)

---

### â± Äá»™ phá»©c táº¡p:

* **Thá»i gian:** `O(N)`
* **KhÃ´ng gian:** `O(N)` Ä‘á»ƒ lÆ°u `Map`

